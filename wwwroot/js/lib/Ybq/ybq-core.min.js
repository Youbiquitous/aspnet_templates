var Ybq,TypeAheadContainerSettings,TypeAheadContainer;String.prototype.capitalize=function(){return this.replace(/(?:^|\s)\S/g,function(n){return n.toUpperCase()})};Ybq=Ybq||{};Ybq.Internal={};Ybq.RootServer="";Ybq.fromServer=function(n){return Ybq.RootServer+n};Ybq.invoke=function(n,t,i){$.ajax({cache:!1,url:Ybq.fromServer(n),success:t,error:i})};Ybq.goto=function(n){window.location=n};Ybq.gotoRelative=function(n){window.location=Ybq.fromServer(n)};Ybq.post=function(n,t,i,r){var u=$.Deferred();return $.ajax({cache:!1,url:Ybq.fromServer(n),type:"post",data:t,success:i,error:r}),u.resolve("true"),u.promise()};TypeAheadContainerSettings=function(){var n={};return n.postOnSelection=!1,n.displayKey="value",n.hintUrl="",n.targetSelector="",n.buddySelector="",n.submitSelector="",n.showHint=!0,n.maxNumberOfHints=10,n.highlight=!0,n.showLabel=!0,n.action=function(){},n};TypeAheadContainer=function(n){var t=new TypeAheadContainerSettings;jQuery.extend(t,n);this.hintAdapter=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(t.displayKey),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:t.maxNumberOfHints,remote:t.hintUrl});$(t.targetSelector).on("typeahead:selected",function(n,i){$(t.targetSelector).attr("data-itemselected",1);$(t.buddySelector).val(i.id);t.postOnSelection&&$(t.submitSelector).click();t.action!=null&&t.action(i.id)});$(t.targetSelector).on("blur",function(){var n=$(t.targetSelector).attr("data-itemselected");n!=="1"&&($(t.targetSelector).val(""),$(t.buddySelector).val(""))});$(t.targetSelector).on("input",function(){var n=$(t.targetSelector).attr("data-itemselected");n==="1"&&($(t.targetSelector).attr("data-itemselected",0),$(t.buddySelector).val(""),$(t.targetSelector).val(""))});this.attach=function(){this.hintAdapter.initialize();$(t.targetSelector).typeahead({hint:t.showHint,highlight:t.highlight,limit:t.maxNumberOfHints,autoSelect:!1},{displayKey:t.displayKey,source:this.hintAdapter.ttAdapter(),templates:{suggestion:function(n){var i=t.showLabel?"<i class='pull-right'>"+(n.label==null?"":n.label)+"<\/i>":"";return"<p><span>"+n.value+"<\/span>"+i+"<\/p>"}}})}};